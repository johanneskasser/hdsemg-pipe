# Channel Selection

The Channel Selection step allows you to select specific EMG channels for further processing using an external channel selection application. This step is crucial for excluding noisy or irrelevant channels from your analysis.

## Overview

In this step, you can:
1. Launch the external channel selection application
2. Process multiple files in sequence
3. Track the processing progress
4. Save selected channels for further analysis

## Requirements

Before using the Channel Selection step:
- The external channel selection application path must be configured in the Settings
- Files must have been processed through the ROI definition step
- The workspace must be properly initialized

## Interface Components

### Main Button
- "Select Channels" button with loading animation
- Shows processing state visually
- Disabled when no files are available or settings are incomplete

### Progress Indicator
- Shows current progress as "processed/total" files
- Updates dynamically during processing
- Example: "3/10" means 3 out of 10 files processed

## Process Flow

1. **Initialization**
   - System checks for cropped input files
   - Verifies external application path
   - Enables/disables action button based on validation

2. **Processing Start**
   - User clicks "Select Channels" button
   - Button shows loading animation
   - Progress counter is reset
   - File processing begins

3. **File Processing**
   - Files are processed sequentially
   - External application is launched for each file
   - Progress indicator updates after each file
   - Results are saved automatically

4. **Completion**
   - Loading animation stops
   - Final progress count is displayed
   - Step is marked as complete
   - System ready for next step

## Configuration

### Required Settings

The following must be configured in the application settings:
```
Settings > Channel Selection App Executable Path
```

### File Handling

Input files:
- Located in the ROI output directory
- Must be in .mat format
- Must contain valid EMG channel data

> This should be a given since the files are generated by the hdsemg-pipe application.

Output files:
- Saved in the channel selection output directory
- Maintain original file names
- Include only selected channels

## Error Handling

### Common Issues

1. **Missing Executable**
   - Error Message: "Channel Selection App Executable Path is not set"
   - Solution: Configure the path in Settings

2. **No Input Files**
   - Warning: "No .mat files found"
   - Solution: Ensure ROI step was completed successfully

3. **Processing Errors**
   - Check external application logs
   - Verify file permissions
   - Ensure sufficient disk space

## Best Practices

1. **Before Processing**
   - Verify external application configuration
   - Check input file availability
   - Ensure workspace has sufficient space

2. **During Processing**
   - Allow each file to process completely
   - Monitor progress indicator
   - Don't close the application during processing

3. **After Processing**
   - Verify output files
   - Check processing counts match expected totals
   - Proceed to next step only after completion

## Next Steps

After channel selection is complete:
1. Verify the number of processed files matches your input
2. Check output directory for processed files
3. Proceed to [Grid Association](grid_association.md)

## Technical Notes

- The step uses a LoadingButton component for visual feedback
- Progress is tracked through the global state
- File processing is handled by the external application
- The step is automatically marked as complete when all files are processed

## Troubleshooting

If you encounter issues:
1. Check application settings
2. Verify input file integrity
3. Ensure external application is working correctly
4. Check workspace permissions
5. Review application logs for error messages
